<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Print variable values during debugging | 止于至善</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Print variable values during debugging" />
<meta name="author" content="Jihuan Tian" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Printing the value of a simple variable, such as those primitive types in C/C++, is an effective way of debugging numerical algorithms. Since devising a test case for verification of mathematical theories is much more brain taxing and time consuming than the debugging work itself, the benefit of a stepwise running debugger (usually equipped with an IDE) is not manifest anymore. Hence, the seemingly outdated printout of variables is good enough for us to probe algorithm details and localize potential bugs." />
<meta property="og:description" content="Printing the value of a simple variable, such as those primitive types in C/C++, is an effective way of debugging numerical algorithms. Since devising a test case for verification of mathematical theories is much more brain taxing and time consuming than the debugging work itself, the benefit of a stepwise running debugger (usually equipped with an IDE) is not manifest anymore. Hence, the seemingly outdated printout of variables is good enough for us to probe algorithm details and localize potential bugs." />
<link rel="canonical" href="https://jihuan-tian.github.io/computer/2022/05/12/print-variable-values-during-debugging.html" />
<meta property="og:url" content="https://jihuan-tian.github.io/computer/2022/05/12/print-variable-values-during-debugging.html" />
<meta property="og:site_name" content="止于至善" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-05-12T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Print variable values during debugging" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jihuan Tian"},"dateModified":"2022-05-12T00:00:00+08:00","datePublished":"2022-05-12T00:00:00+08:00","description":"Printing the value of a simple variable, such as those primitive types in C/C++, is an effective way of debugging numerical algorithms. Since devising a test case for verification of mathematical theories is much more brain taxing and time consuming than the debugging work itself, the benefit of a stepwise running debugger (usually equipped with an IDE) is not manifest anymore. Hence, the seemingly outdated printout of variables is good enough for us to probe algorithm details and localize potential bugs.","headline":"Print variable values during debugging","mainEntityOfPage":{"@type":"WebPage","@id":"https://jihuan-tian.github.io/computer/2022/05/12/print-variable-values-during-debugging.html"},"url":"https://jihuan-tian.github.io/computer/2022/05/12/print-variable-values-during-debugging.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/font.css">
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/assets/css/htmlize-syntax-highlight.css">
  
  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico?">
  <link href="https://fonts.googlefonts.cn/css?family=EB+Garamond" rel="stylesheet"><link type="application/atom+xml" rel="alternate" href="https://jihuan-tian.github.io/feed.xml" title="止于至善" />
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">止于至善</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          <!-- Enforce a fixed order for my categories. -->
          <a class="page-link" href="/math/">Math</a>
          <a class="page-link" href="/computer/">Computer</a>
          <a class="page-link" href="/thoughts/">Thoughts</a>
          <a class="page-link" href="/tags/">Tags</a>
          <a class="page-link" href="/about/">About</a>
        </div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Print variable values during debugging</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-05-12T00:00:00+08:00" itemprop="datePublished">
        Thu, May 12, W19, 2022 &nbsp;

        
          Categories:
          
            <a href="/computer">Computer</a>
          
         &nbsp;
        
          Tags:
          
            <a href="/tags/算法开发">算法开发</a>
          
            <a href="/tags/Octave">Octave</a>
          
            <a href="/tags/C++">C++</a>
          
        
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Printing the value of a simple variable, such as those primitive types in C/C++, is an effective way of debugging numerical algorithms. Since devising a test case for verification of mathematical theories is much more brain taxing and time consuming than the debugging work itself, the benefit of a stepwise running debugger (usually equipped with an IDE) is not manifest anymore. Hence, the seemingly outdated printout of variables is good enough for us to probe algorithm details and localize potential bugs.</p>

<p>In C++, a common trick for printing out the value of a variable in the form <code class="language-plaintext highlighter-rouge">variable_name=variable_value</code> is to define a macro as below. Here, the operator <code class="language-plaintext highlighter-rouge">#</code> is adopted to get the literal string of the token passed into the macro. Also beware of the brackets enclosing <code class="language-plaintext highlighter-rouge">variable</code>. They are requisite to prevent unexpected errors caused by some arbitrary string stored in <code class="language-plaintext highlighter-rouge">variable</code>.</p>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">#define PRINTOUT(variable) std::cout &lt;&lt; #variable &lt;&lt; "=" &lt;&lt; (variable) &lt;&lt; std::endl
</span></code></pre></div></div>

<p>To realize similar functionality in GNU Octave, I’ve defined a function <code class="language-plaintext highlighter-rouge">printout_var</code> as below, which accepts an expression to be evaluated and prints out its string representation and value.</p>
<pre>
<span class="keyword">function</span> <span class="function-name">printout_var</span>(varargin)
  <span class="comment">## printout_var - Print out the value of an expression for debugging
</span>  <span class="comment">## purpose.
</span>
  [reg<span class="builtin">,</span> prop] <span class="builtin">=</span> parseparams(varargin)<span class="builtin">;</span>

  <span class="keyword">if</span> (length(reg) <span class="builtin">&gt;</span> 0)
    fid <span class="builtin">=</span> reg{1}<span class="builtin">;</span>
  <span class="keyword">else</span>
    fid <span class="builtin">=</span> stdout<span class="builtin">;</span>
  <span class="keyword">endif</span>

  <span class="keyword">if</span> (length(prop) <span class="builtin">&gt;</span> 0)
    expression_string <span class="builtin">=</span> prop{1}<span class="builtin">;</span>
    fprintf(fid<span class="builtin">,</span> cstrcat(expression_string<span class="builtin">,</span> <span class="string">" = %s\n"</span>)<span class="builtin">,</span> mat2str(evalin(<span class="string">"caller"</span><span class="builtin">,</span> expression_string)<span class="builtin">,</span> 15))<span class="builtin">;</span>
  <span class="keyword">else</span>
    error(<span class="string">"=== Please provide the expression to be evaluated!"</span>)<span class="builtin">;</span>
  <span class="keyword">endif</span>
<span class="keyword">endfunction</span>
</pre>

<p>In this function, I use <code class="language-plaintext highlighter-rouge">parseparams</code> to parse the list of arguments with a variable length. The first returned cell array <code class="language-plaintext highlighter-rouge">reg</code> holds a list of arguments before the first string element in <code class="language-plaintext highlighter-rouge">varargin</code>, while the second returned cell array <code class="language-plaintext highlighter-rouge">prop</code> holds the remaining arguments, which begins with the first string argument in <code class="language-plaintext highlighter-rouge">varargin</code>. The first non-string argument as an integer is treated as the file descriptor <code class="language-plaintext highlighter-rouge">fid</code> for the printout. The first string argument is the mandatory expression <code class="language-plaintext highlighter-rouge">expression_string</code>.</p>

<p>To evaluate the expression, I use the built-in function <code class="language-plaintext highlighter-rouge">evalin</code>. Being different from the commonly used <code class="language-plaintext highlighter-rouge">eval</code>, it can specify the context, either <code class="language-plaintext highlighter-rouge">caller</code> or <code class="language-plaintext highlighter-rouge">base</code>, in which the expression is executed. Here, I set the context to <code class="language-plaintext highlighter-rouge">caller</code>. This is mandatory because the evaluation takes place in the local scope of my function <code class="language-plaintext highlighter-rouge">printout_var</code>, while <code class="language-plaintext highlighter-rouge">printout_var</code> needs to print those variables defined outside its own environment. It is obvious that when <code class="language-plaintext highlighter-rouge">printout_var</code> is called from an interactive session of Octave, which is our usual working scenario for debugging, the <code class="language-plaintext highlighter-rouge">caller</code> context is actually the same as the <code class="language-plaintext highlighter-rouge">base</code> context. In addition, <code class="language-plaintext highlighter-rouge">mat2str</code> is used to convert the numerical result into string representation. It is suitable for both scalar and matrix values, which is better than <code class="language-plaintext highlighter-rouge">num2str</code>.</p>


  </div><a class="u-url" href="/computer/2022/05/12/print-variable-values-during-debugging.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">止于至善</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Jihuan Tian</li><li><a class="u-email" href="mailto:jihuan_tian@hotmail.com">jihuan_tian@hotmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="/feed.xml"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#rss"></use></svg> <span>RSS</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>As regards numerical analysis, mathematical electromagnetism, Linux techniques and personal thoughts.</p>
      </div>
      <div class="footer-col">
        <p>The articles are under a <a href='http://creativecommons.org/licenses/by-nc-sa/4.0/'>Creative Commons Attribution License</a>. Copyright &copy; 2026 <a href="mailto:jihuan_tian@hotmail.com">Jihuan Tian</a>.</p>
      </div>
    </div>
  </div>

</footer>
</body>

</html>
