<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Listening to English audio with lyrics on Linux | 止于至善</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Listening to English audio with lyrics on Linux" />
<meta name="author" content="Jihuan Tian" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="To study English from movies is consistent with the methodology of praxis. GNU/Linux provides us a bunch of tools to extract audio and subtitle from videos as well as play the music file with scrolling lyrics. Using this study mode, we can focus on the English pronunciation, vocabulary and wording adopted in the script." />
<meta property="og:description" content="To study English from movies is consistent with the methodology of praxis. GNU/Linux provides us a bunch of tools to extract audio and subtitle from videos as well as play the music file with scrolling lyrics. Using this study mode, we can focus on the English pronunciation, vocabulary and wording adopted in the script." />
<link rel="canonical" href="https://jihuan-tian.github.io/computer/2022/04/16/listening-to-english-audio-with-lyrics-on-linux.html" />
<meta property="og:url" content="https://jihuan-tian.github.io/computer/2022/04/16/listening-to-english-audio-with-lyrics-on-linux.html" />
<meta property="og:site_name" content="止于至善" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-04-16T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Listening to English audio with lyrics on Linux" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jihuan Tian"},"dateModified":"2022-04-16T00:00:00+08:00","datePublished":"2022-04-16T00:00:00+08:00","description":"To study English from movies is consistent with the methodology of praxis. GNU/Linux provides us a bunch of tools to extract audio and subtitle from videos as well as play the music file with scrolling lyrics. Using this study mode, we can focus on the English pronunciation, vocabulary and wording adopted in the script.","headline":"Listening to English audio with lyrics on Linux","mainEntityOfPage":{"@type":"WebPage","@id":"https://jihuan-tian.github.io/computer/2022/04/16/listening-to-english-audio-with-lyrics-on-linux.html"},"url":"https://jihuan-tian.github.io/computer/2022/04/16/listening-to-english-audio-with-lyrics-on-linux.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/font.css">
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/assets/css/htmlize-syntax-highlight.css">
  
  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico?">
  <link href="https://fonts.googlefonts.cn/css?family=EB+Garamond" rel="stylesheet"><link type="application/atom+xml" rel="alternate" href="https://jihuan-tian.github.io/feed.xml" title="止于至善" />
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">止于至善</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          <!-- Enforce a fixed order for my categories. -->
          <a class="page-link" href="/math/">Math</a>
          <a class="page-link" href="/computer/">Computer</a>
          <a class="page-link" href="/thoughts/">Thoughts</a>
          <a class="page-link" href="/tags/">Tags</a>
          <a class="page-link" href="/about/">About</a>
        </div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Listening to English audio with lyrics on Linux</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-04-16T00:00:00+08:00" itemprop="datePublished">Apr 16, 2022 &nbsp;

        
          Categories:
          
            <a href="/computer">Computer</a>
          
         &nbsp;
        
          Tags:
          
            <a href="/tags/英语学习">英语学习</a>
          
            <a href="/tags/Linux">Linux</a>
          
            <a href="/tags/multimedia">multimedia</a>
          
            <a href="/tags/ffmpeg">ffmpeg</a>
          
        
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>To study English from movies is consistent with the methodology of praxis. GNU/Linux provides us a bunch of tools to extract audio and subtitle from videos as well as play the music file with scrolling lyrics. Using this study mode, we can focus on the English pronunciation, vocabulary and wording adopted in the script.</p>

<h1 id="generate-lyrics-from-subtitle">Generate lyrics from subtitle</h1>

<ol>
  <li>
    <p>Extract the audio from a video using <code class="language-plaintext highlighter-rouge">ffmpeg</code>, for example</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ffmpeg <span class="nt">-i</span> movie-file-name <span class="nt">-vn</span> <span class="nt">-ar</span> 44100 <span class="nt">-ac</span> 2 <span class="nt">-b</span>:a 192k <span class="nt">-f</span> mp3 movie-audio.mp3
</code></pre></div>    </div>

    <p>Here, <code class="language-plaintext highlighter-rouge">-i</code> specifies the input video file name, <code class="language-plaintext highlighter-rouge">-vn</code> disables the video, <code class="language-plaintext highlighter-rouge">-ar</code> specifies the audio sampling frequency in Hz, <code class="language-plaintext highlighter-rouge">-ac</code> specifies the number of audio channels, <code class="language-plaintext highlighter-rouge">-b:a</code> sets the audio bitrate in kbit/s and <code class="language-plaintext highlighter-rouge">-f</code> specifies the file format.</p>
  </li>
  <li>
    <p>Extract the embedded subtitle from <code class="language-plaintext highlighter-rouge">mkv</code></p>

    <p>Install <code class="language-plaintext highlighter-rouge">mkvtoolnix</code> and <code class="language-plaintext highlighter-rouge">mkvtoolnix-gui</code> using <code class="language-plaintext highlighter-rouge">apt-get</code>. After opening a <code class="language-plaintext highlighter-rouge">mkv</code> file in <code class="language-plaintext highlighter-rouge">mkvtoolnix-gui</code>, select the English subtitle only and export it as a <code class="language-plaintext highlighter-rouge">mks</code> file. If the subtitle is an independent file, this step can be skipped.</p>

    <p><img src="/figures/Screenshot_20220416_mkvtoolnix.png" alt="mkvtoolnix-gui" /></p>
  </li>
  <li>
    <p>Convert the subtitle file to lyrics using <code class="language-plaintext highlighter-rouge">ffmpeg</code></p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ffmpeg <span class="nt">-i</span> subtitle-file-name subtitle.lrc
</code></pre></div>    </div>
  </li>
</ol>

<h1 id="compile-and-install-the-tool-for-displaying-lyrics">Compile and install the tool for displaying lyrics</h1>

<ol>
  <li>
    <p>Clone <code class="language-plaintext highlighter-rouge">osdlyrics</code> from GitHub</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> git clone https://github.com/osdlyrics/osdlyrics.git
</code></pre></div>    </div>
  </li>
  <li>Install the following dependencies using <code class="language-plaintext highlighter-rouge">apt-get</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">intltool</code></li>
      <li><code class="language-plaintext highlighter-rouge">libdbus-glib-1-dev</code> and <code class="language-plaintext highlighter-rouge">libdbus-glib-1-dev-bin</code></li>
      <li><code class="language-plaintext highlighter-rouge">python3-future</code> and <code class="language-plaintext highlighter-rouge">python3-pycurl</code></li>
    </ul>
  </li>
  <li>
    <p>Enter the cloned directory, compile and install <code class="language-plaintext highlighter-rouge">osdlyrics</code>.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ./autogen.sh
 ./configure <span class="nv">PYTHON</span><span class="o">=</span>/usr/bin/python3
 make <span class="nt">-j4</span>
 <span class="nb">sudo </span>make <span class="nb">install</span>
</code></pre></div>    </div>

    <p>However, after the installation, <code class="language-plaintext highlighter-rouge">osdlyrics</code> cannot be started reporting the following message, which indicates the error is caused by <code class="language-plaintext highlighter-rouge">osdlyrics-daemon</code>.</p>

    <blockquote>
      <p><em>Error</em>: in function _start_daemon_cb: ol_main.c[769]
Unable to start daemon: GDBus.Error:org.freedesktop.DBus.Error.Spawn.ChildExited: Process org.osdlyrics.Daemon exited with status 1</p>
    </blockquote>

    <p>By manually running <code class="language-plaintext highlighter-rouge">osdlyrics-daemon</code>, we can see that the Python module <code class="language-plaintext highlighter-rouge">osdlyrics</code> cannot be found, even though it has been installed to <code class="language-plaintext highlighter-rouge">/usr/local/lib/python3.7/site-packages</code>. This is because the default path for searching packages by Python 3.7 should be <code class="language-plaintext highlighter-rouge">/usr/local/lib/python3.7/dist-packages</code> instead of <code class="language-plaintext highlighter-rouge">...site-packages</code>. Hence, creating a symbolic link under this path which points to <code class="language-plaintext highlighter-rouge">/usr/local/lib/python3.7/site-packages/osdlyrics</code> solves the problem.</p>

    <blockquote>
      <p>Traceback (most recent call last):
  File “/usr/local/lib/osdlyrics/daemon/main.py”, line 27, in <module>
    from osdlyrics import PACKAGE_VERSION
ModuleNotFoundError: No module named 'osdlyrics'</module></p>
    </blockquote>
  </li>
  <li>
    <p>Run <code class="language-plaintext highlighter-rouge">osdlyrics</code> from the command line and select <code class="language-plaintext highlighter-rouge">VLC</code> as the associated music player. Even though my favorite music player <code class="language-plaintext highlighter-rouge">Audacious</code> is claimed to be supported, it actually does not work properly with <code class="language-plaintext highlighter-rouge">osdlyrics</code> at the moment. The command used by <code class="language-plaintext highlighter-rouge">osdlyrics</code> to start <code class="language-plaintext highlighter-rouge">VLC</code> is</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> /usr/bin/vlc --started-from-file %U
</code></pre></div>    </div>
  </li>
</ol>

<p>Now the English movie audio can be played with a synchronously scrolling lyrics and a snapshot is given below. N.B. We can use <code class="language-plaintext highlighter-rouge">VLC</code>’s <code class="language-plaintext highlighter-rouge">A-B</code> mode to repeatedly listen to a fragment, which is very helpful for us to imitate the original pronunciation.</p>

<p align="center"><img src="/figures/Screenshot_20220415_vlc-osdlyrics.png" alt="Scrolling lyrics" /></p>
<p align="center">Scrolling lyrics</p>


  </div><script src="https://utteranc.es/client.js"
          repo="jihuan-tian/jihuan-tian.github.io"
          issue-term="pathname"
          theme="github-light"
          crossorigin="anonymous"
          async>
  </script>

  <a class="u-url" href="/computer/2022/04/16/listening-to-english-audio-with-lyrics-on-linux.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">止于至善</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Jihuan Tian</li><li><a class="u-email" href="mailto:jihuan_tian@hotmail.com">jihuan_tian@hotmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="/feed.xml"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#rss"></use></svg> <span>RSS</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>As regards numerical analysis, mathematical electromagnetism, Linux techniques and personal thoughts.</p>
      </div>
      <div class="footer-col">
        <p>The articles are under a <a href='http://creativecommons.org/licenses/by-nc-sa/4.0/'>Creative Commons Attribution License</a>. Copyright &copy; 2025 <a href="mailto:jihuan_tian@hotmail.com">Jihuan Tian</a>.</p>
      </div>
    </div>
  </div>

</footer>
</body>

</html>
