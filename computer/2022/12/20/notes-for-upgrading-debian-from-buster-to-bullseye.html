<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Notes for upgrading Debian from Buster to Bullseye | 止于至善</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Notes for upgrading Debian from Buster to Bullseye" />
<meta name="author" content="Jihuan Tian" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Use Tsinghua mirror (speed 11 MB/s) instead of previously used 163 mirror (speed 150 KB/s) deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free During the upgrade, the following command needs to be executed (maybe several times) if needed. apt --fix-broken install After dist-upgrade, some issues should be handled as below, some of which still cannot be solved. /dev/sda and /dev/sdb have been swapped after a warm system restart. Then the script mount_disks.sh for mounting hard disks should be modified. However, after performing a cold system restart, the order of hard disks returns to normal. Desktop notes plasmoid cannot be displayed. Solution: install the plasma-widgets-addons package. Because some packages have been uninstalled during the system upgrade, they should be reinstalled again, such as those common KDE packages, kde-baseapps, plasma-widgets-addons, kde-plasma-desktop and kde-standard. Emacs Toolbar icons are lost with only their texts left. Reconfiguring the GNOME/GTK application style in KDE settings only temporarily make the icons reappear but they do not persist after system restart. N.B. The configuration of GTK theme and associated icon theme is in the file ~/.config/gtk-3.0/settings.ini. gtk-theme-name=Breeze gtk-icon-theme-name=breeze gtk-fallback-icon-theme=breeze Files cannot be copied within Dired mode. Org structure template is now triggered by C-c C-, instead of the old &lt;KEY. Font scaling for high DPI monitor in Plasma has been improved. There is no need to manually increase the font size anymore, only a universal scaling operation is enough. Hence, previously manually enlarged fonts in some applications such as Eclipse should be restored to normal. For example, adjust the font size from 18 pt to 12 pt. However, the toolbar icon size in Eclipse should still be manually scaled to 200% by adding the following configuration to the initialization file eclipse.ini. -Dswt.enable.autoScale=true -Dswt.autoScale=200 -Dswt.autoScale.method=nearest The rendering backend of the compositor should not use OpenGL, which will make the process kwin_x11 occupy 100% CPU and the whole system stuck." />
<meta property="og:description" content="Use Tsinghua mirror (speed 11 MB/s) instead of previously used 163 mirror (speed 150 KB/s) deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free During the upgrade, the following command needs to be executed (maybe several times) if needed. apt --fix-broken install After dist-upgrade, some issues should be handled as below, some of which still cannot be solved. /dev/sda and /dev/sdb have been swapped after a warm system restart. Then the script mount_disks.sh for mounting hard disks should be modified. However, after performing a cold system restart, the order of hard disks returns to normal. Desktop notes plasmoid cannot be displayed. Solution: install the plasma-widgets-addons package. Because some packages have been uninstalled during the system upgrade, they should be reinstalled again, such as those common KDE packages, kde-baseapps, plasma-widgets-addons, kde-plasma-desktop and kde-standard. Emacs Toolbar icons are lost with only their texts left. Reconfiguring the GNOME/GTK application style in KDE settings only temporarily make the icons reappear but they do not persist after system restart. N.B. The configuration of GTK theme and associated icon theme is in the file ~/.config/gtk-3.0/settings.ini. gtk-theme-name=Breeze gtk-icon-theme-name=breeze gtk-fallback-icon-theme=breeze Files cannot be copied within Dired mode. Org structure template is now triggered by C-c C-, instead of the old &lt;KEY. Font scaling for high DPI monitor in Plasma has been improved. There is no need to manually increase the font size anymore, only a universal scaling operation is enough. Hence, previously manually enlarged fonts in some applications such as Eclipse should be restored to normal. For example, adjust the font size from 18 pt to 12 pt. However, the toolbar icon size in Eclipse should still be manually scaled to 200% by adding the following configuration to the initialization file eclipse.ini. -Dswt.enable.autoScale=true -Dswt.autoScale=200 -Dswt.autoScale.method=nearest The rendering backend of the compositor should not use OpenGL, which will make the process kwin_x11 occupy 100% CPU and the whole system stuck." />
<link rel="canonical" href="https://jihuan-tian.github.io/computer/2022/12/20/notes-for-upgrading-debian-from-buster-to-bullseye.html" />
<meta property="og:url" content="https://jihuan-tian.github.io/computer/2022/12/20/notes-for-upgrading-debian-from-buster-to-bullseye.html" />
<meta property="og:site_name" content="止于至善" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-12-20T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Notes for upgrading Debian from Buster to Bullseye" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jihuan Tian"},"dateModified":"2022-12-20T00:00:00+08:00","datePublished":"2022-12-20T00:00:00+08:00","description":"Use Tsinghua mirror (speed 11 MB/s) instead of previously used 163 mirror (speed 150 KB/s) deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free deb https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free # deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free During the upgrade, the following command needs to be executed (maybe several times) if needed. apt --fix-broken install After dist-upgrade, some issues should be handled as below, some of which still cannot be solved. /dev/sda and /dev/sdb have been swapped after a warm system restart. Then the script mount_disks.sh for mounting hard disks should be modified. However, after performing a cold system restart, the order of hard disks returns to normal. Desktop notes plasmoid cannot be displayed. Solution: install the plasma-widgets-addons package. Because some packages have been uninstalled during the system upgrade, they should be reinstalled again, such as those common KDE packages, kde-baseapps, plasma-widgets-addons, kde-plasma-desktop and kde-standard. Emacs Toolbar icons are lost with only their texts left. Reconfiguring the GNOME/GTK application style in KDE settings only temporarily make the icons reappear but they do not persist after system restart. N.B. The configuration of GTK theme and associated icon theme is in the file ~/.config/gtk-3.0/settings.ini. gtk-theme-name=Breeze gtk-icon-theme-name=breeze gtk-fallback-icon-theme=breeze Files cannot be copied within Dired mode. Org structure template is now triggered by C-c C-, instead of the old &lt;KEY. Font scaling for high DPI monitor in Plasma has been improved. There is no need to manually increase the font size anymore, only a universal scaling operation is enough. Hence, previously manually enlarged fonts in some applications such as Eclipse should be restored to normal. For example, adjust the font size from 18 pt to 12 pt. However, the toolbar icon size in Eclipse should still be manually scaled to 200% by adding the following configuration to the initialization file eclipse.ini. -Dswt.enable.autoScale=true -Dswt.autoScale=200 -Dswt.autoScale.method=nearest The rendering backend of the compositor should not use OpenGL, which will make the process kwin_x11 occupy 100% CPU and the whole system stuck.","headline":"Notes for upgrading Debian from Buster to Bullseye","mainEntityOfPage":{"@type":"WebPage","@id":"https://jihuan-tian.github.io/computer/2022/12/20/notes-for-upgrading-debian-from-buster-to-bullseye.html"},"url":"https://jihuan-tian.github.io/computer/2022/12/20/notes-for-upgrading-debian-from-buster-to-bullseye.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/font.css">
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/assets/css/htmlize-syntax-highlight.css">
  
  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico?">
  <link href="https://fonts.googlefonts.cn/css?family=EB+Garamond" rel="stylesheet">
  <script type='text/javascript' src='https://platform-api.sharethis.com/js/sharethis.js#property=67ba859acde8790019eafb38&product=inline-share-buttons' async='async'></script><link type="application/atom+xml" rel="alternate" href="https://jihuan-tian.github.io/feed.xml" title="止于至善" />
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">止于至善</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          <!-- Enforce a fixed order for my categories. -->
          <a class="page-link" href="/math/">Math</a>
          <a class="page-link" href="/computer/">Computer</a>
          <a class="page-link" href="/thoughts/">Thoughts</a>
          <a class="page-link" href="/tags/">Tags</a>
          <a class="page-link" href="/about/">About</a>
        </div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Notes for upgrading Debian from Buster to Bullseye</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-12-20T00:00:00+08:00" itemprop="datePublished">Dec 20, 2022 &nbsp;

        
          Categories:
          
            <a href="/computer">Computer</a>
          
         &nbsp;
        
          Tags:
          
            <a href="/tags/Linux">Linux</a>
          
            <a href="/tags/Debian">Debian</a>
          
        
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul>
  <li>
    <p>Use Tsinghua mirror (speed 11 MB/s) instead of previously used 163 mirror (speed 150 KB/s)</p>

    <div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free
# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye main contrib non-free
deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free
# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-updates main contrib non-free
    
deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free
# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bullseye-backports main contrib non-free
    
deb https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free
# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian-security bullseye-security main contrib non-free
</code></pre></div>    </div>
  </li>
  <li>
    <p>During the upgrade, the following command needs to be executed (maybe several times) if needed.</p>

    <div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt --fix-broken install
</code></pre></div>    </div>
  </li>
  <li>
    <p>After dist-upgrade, some issues should be handled as below, some of which still cannot be solved.</p>
    <ul class="task-list">
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" /><code class="language-plaintext highlighter-rouge">/dev/sda</code> and <code class="language-plaintext highlighter-rouge">/dev/sdb</code> have been swapped after a warm system restart. Then the script <code class="language-plaintext highlighter-rouge">mount_disks.sh</code> for mounting hard disks should be modified. However, after performing a cold system restart, the order of hard disks returns to normal.</li>
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />Desktop notes plasmoid cannot be displayed. Solution: install the <code class="language-plaintext highlighter-rouge">plasma-widgets-addons</code> package.</li>
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />Because some packages have been uninstalled during the system upgrade, they should be reinstalled again, such as those common KDE packages, <code class="language-plaintext highlighter-rouge">kde-baseapps</code>, <code class="language-plaintext highlighter-rouge">plasma-widgets-addons</code>, <code class="language-plaintext highlighter-rouge">kde-plasma-desktop</code> and <code class="language-plaintext highlighter-rouge">kde-standard</code>.</li>
      <li class="task-list-item">Emacs
        <ul class="task-list">
          <li class="task-list-item">
            <p><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Toolbar icons are lost with only their texts left. Reconfiguring the GNOME/GTK application style in KDE settings only temporarily make the icons reappear but they do not persist after system restart. N.B. The configuration of GTK theme and associated icon theme is in the file <code class="language-plaintext highlighter-rouge">~/.config/gtk-3.0/settings.ini</code>.</p>

            <div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gtk-theme-name=Breeze
gtk-icon-theme-name=breeze
gtk-fallback-icon-theme=breeze
</code></pre></div>            </div>
          </li>
          <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Files cannot be copied within Dired mode.</li>
          <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />Org structure template is now triggered by <code class="language-plaintext highlighter-rouge">C-c C-,</code> instead of the old <code class="language-plaintext highlighter-rouge">&lt;KEY</code>.</li>
        </ul>
      </li>
      <li class="task-list-item">
        <p><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />Font scaling for high DPI monitor in Plasma has been improved. There is no need to manually increase the font size anymore, only a universal scaling operation is enough. Hence, previously manually enlarged fonts in some applications such as Eclipse should be restored to normal. For example, adjust the font size from 18 pt to 12 pt. However, the toolbar icon size in Eclipse should still be manually scaled to 200% by adding the following configuration to the initialization file <code class="language-plaintext highlighter-rouge">eclipse.ini</code>.</p>

        <div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-Dswt.enable.autoScale=true
-Dswt.autoScale=200
-Dswt.autoScale.method=nearest
</code></pre></div>        </div>
      </li>
      <li class="task-list-item">The rendering backend of the compositor should not use OpenGL, which will make the process <code class="language-plaintext highlighter-rouge">kwin_x11</code> occupy 100% CPU and the whole system stuck.</li>
    </ul>
  </li>
</ul>


  </div><div class="sharethis-inline-share-buttons"></div>

  <script src="https://utteranc.es/client.js"
          repo="jihuan-tian/jihuan-tian.github.io"
          issue-term="pathname"
          theme="github-light"
          crossorigin="anonymous"
          async>
  </script>

  <a class="u-url" href="/computer/2022/12/20/notes-for-upgrading-debian-from-buster-to-bullseye.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">止于至善</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Jihuan Tian</li><li><a class="u-email" href="mailto:jihuan_tian@hotmail.com">jihuan_tian@hotmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="/feed.xml"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#rss"></use></svg> <span>RSS</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>As regards numerical analysis, mathematical electromagnetism, Linux techniques and personal thoughts.</p>
      </div>
      <div class="footer-col">
        <p>The articles are under a <a href='http://creativecommons.org/licenses/by-nc-sa/4.0/'>Creative Commons Attribution License</a>. Copyright &copy; 2025 <a href="mailto:jihuan_tian@hotmail.com">Jihuan Tian</a>.</p>
      </div>
    </div>
  </div>

</footer>
</body>

</html>
