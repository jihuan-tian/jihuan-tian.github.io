<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Tips for making tikz commutative diagrams | 止于至善</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Tips for making tikz commutative diagrams" />
<meta name="author" content="Jihuan Tian" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Read the tikzcd manual togeter with the TikZ &amp; PGF manual. In a TikZ commutative diagram, both and need to be enclosed in curly braces if they contain commas. Specify the position of a label along the arrow path. The numeric values below are distance percentage on the path. at start: pos=0 very near start: pos=0.125 near start: pos=0.25 midway: pos=0.5 near end: pos=0.75 very near end: pos=0.875 at end: pos=1 There should be no empty lines between different matrix entries in the diagram. Determine the correct direction of arrows and their tail directions (if any, such as the harpoon) by rotating the graph so that the starting node is placed on the left and the target node is on the right. By default, a label is placed on the left side of the arrow to which it is attached (relative to the arrow’s direction). Inner sep controls the distance between the label and the arrow. Label’s position with respect to the arrow: above, below, left, right, swap. Source code block for writing tikz commutative diagrams in Emacs Org mode: #+header: :headers &#39;(&quot;\\usepackage{tikz}&quot; &quot;\\usepackage{tikz-cd}&quot;) #+header: :imagemagick yes :iminoptions -density 500 :imoutoptions -trim #+begin_src latex :exports results :eval never-export :results file raw :file figure-dir/filename.png \begin{tikzcd} % ...... \end{tikzcd} #+end_src #+ATTR_ORG: :width 1000 :align center #+ATTR_LATEX: :width 0.5\textwidth #+RESULTS: [[file:figure-dir/filename.png]] If Imagemagick is not specified, the driver for generating PNG images is dvipng. According to the tikzcd manual, dvi viewers will not display diagrams correctly. It is necessary to convert the dvi file to pdf or ps format—or, even better, use a tool that generates pdf files directly, such as pdflatex. Therefore, we need to use Imagemagick, which will generate PNG images from PDF files. In the header arguments for Imagemagick, :iminoptions specifies the parameters for the input file of Imagemagick, while :imoutoptions specifies the parameters for the output file. -trim must be used in :imoutoptions to crop the image of a4 paper size. The option :eval never-export is used to disable source code evaluation during each export, which can accelerate the export. Meanwhile, the option :exports results is still effective, which tell Org to export the results only, without the source code." />
<meta property="og:description" content="Read the tikzcd manual togeter with the TikZ &amp; PGF manual. In a TikZ commutative diagram, both and need to be enclosed in curly braces if they contain commas. Specify the position of a label along the arrow path. The numeric values below are distance percentage on the path. at start: pos=0 very near start: pos=0.125 near start: pos=0.25 midway: pos=0.5 near end: pos=0.75 very near end: pos=0.875 at end: pos=1 There should be no empty lines between different matrix entries in the diagram. Determine the correct direction of arrows and their tail directions (if any, such as the harpoon) by rotating the graph so that the starting node is placed on the left and the target node is on the right. By default, a label is placed on the left side of the arrow to which it is attached (relative to the arrow’s direction). Inner sep controls the distance between the label and the arrow. Label’s position with respect to the arrow: above, below, left, right, swap. Source code block for writing tikz commutative diagrams in Emacs Org mode: #+header: :headers &#39;(&quot;\\usepackage{tikz}&quot; &quot;\\usepackage{tikz-cd}&quot;) #+header: :imagemagick yes :iminoptions -density 500 :imoutoptions -trim #+begin_src latex :exports results :eval never-export :results file raw :file figure-dir/filename.png \begin{tikzcd} % ...... \end{tikzcd} #+end_src #+ATTR_ORG: :width 1000 :align center #+ATTR_LATEX: :width 0.5\textwidth #+RESULTS: [[file:figure-dir/filename.png]] If Imagemagick is not specified, the driver for generating PNG images is dvipng. According to the tikzcd manual, dvi viewers will not display diagrams correctly. It is necessary to convert the dvi file to pdf or ps format—or, even better, use a tool that generates pdf files directly, such as pdflatex. Therefore, we need to use Imagemagick, which will generate PNG images from PDF files. In the header arguments for Imagemagick, :iminoptions specifies the parameters for the input file of Imagemagick, while :imoutoptions specifies the parameters for the output file. -trim must be used in :imoutoptions to crop the image of a4 paper size. The option :eval never-export is used to disable source code evaluation during each export, which can accelerate the export. Meanwhile, the option :exports results is still effective, which tell Org to export the results only, without the source code." />
<link rel="canonical" href="https://jihuan-tian.github.io/computer/2025/11/20/tips-for-making-tikz-commutative-diagrams.html" />
<meta property="og:url" content="https://jihuan-tian.github.io/computer/2025/11/20/tips-for-making-tikz-commutative-diagrams.html" />
<meta property="og:site_name" content="止于至善" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-11-20T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Tips for making tikz commutative diagrams" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jihuan Tian"},"dateModified":"2025-11-20T00:00:00+08:00","datePublished":"2025-11-20T00:00:00+08:00","description":"Read the tikzcd manual togeter with the TikZ &amp; PGF manual. In a TikZ commutative diagram, both and need to be enclosed in curly braces if they contain commas. Specify the position of a label along the arrow path. The numeric values below are distance percentage on the path. at start: pos=0 very near start: pos=0.125 near start: pos=0.25 midway: pos=0.5 near end: pos=0.75 very near end: pos=0.875 at end: pos=1 There should be no empty lines between different matrix entries in the diagram. Determine the correct direction of arrows and their tail directions (if any, such as the harpoon) by rotating the graph so that the starting node is placed on the left and the target node is on the right. By default, a label is placed on the left side of the arrow to which it is attached (relative to the arrow’s direction). Inner sep controls the distance between the label and the arrow. Label’s position with respect to the arrow: above, below, left, right, swap. Source code block for writing tikz commutative diagrams in Emacs Org mode: #+header: :headers &#39;(&quot;\\\\usepackage{tikz}&quot; &quot;\\\\usepackage{tikz-cd}&quot;) #+header: :imagemagick yes :iminoptions -density 500 :imoutoptions -trim #+begin_src latex :exports results :eval never-export :results file raw :file figure-dir/filename.png \\begin{tikzcd} % ...... \\end{tikzcd} #+end_src #+ATTR_ORG: :width 1000 :align center #+ATTR_LATEX: :width 0.5\\textwidth #+RESULTS: [[file:figure-dir/filename.png]] If Imagemagick is not specified, the driver for generating PNG images is dvipng. According to the tikzcd manual, dvi viewers will not display diagrams correctly. It is necessary to convert the dvi file to pdf or ps format—or, even better, use a tool that generates pdf files directly, such as pdflatex. Therefore, we need to use Imagemagick, which will generate PNG images from PDF files. In the header arguments for Imagemagick, :iminoptions specifies the parameters for the input file of Imagemagick, while :imoutoptions specifies the parameters for the output file. -trim must be used in :imoutoptions to crop the image of a4 paper size. The option :eval never-export is used to disable source code evaluation during each export, which can accelerate the export. Meanwhile, the option :exports results is still effective, which tell Org to export the results only, without the source code.","headline":"Tips for making tikz commutative diagrams","mainEntityOfPage":{"@type":"WebPage","@id":"https://jihuan-tian.github.io/computer/2025/11/20/tips-for-making-tikz-commutative-diagrams.html"},"url":"https://jihuan-tian.github.io/computer/2025/11/20/tips-for-making-tikz-commutative-diagrams.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/font.css">
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/assets/css/htmlize-syntax-highlight.css">
  
  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico?">
  <link href="https://fonts.googlefonts.cn/css?family=EB+Garamond" rel="stylesheet"><link type="application/atom+xml" rel="alternate" href="https://jihuan-tian.github.io/feed.xml" title="止于至善" />
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">止于至善</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          <!-- Enforce a fixed order for my categories. -->
          <a class="page-link" href="/math/">Math</a>
          <a class="page-link" href="/computer/">Computer</a>
          <a class="page-link" href="/thoughts/">Thoughts</a>
          <a class="page-link" href="/tags/">Tags</a>
          <a class="page-link" href="/about/">About</a>
        </div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Tips for making tikz commutative diagrams</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2025-11-20T00:00:00+08:00" itemprop="datePublished">
        Thu, Nov 20, W46, 2025 &nbsp;

        
          Categories:
          
            <a href="/computer">Computer</a>
          
         &nbsp;
        
          Tags:
          
            <a href="/tags/LaTeX">LaTeX</a>
          
            <a href="/tags/Org-mode">Org-mode</a>
          
        
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul>
  <li>Read the tikzcd manual togeter with the TikZ &amp; PGF manual.</li>
  <li>In a TikZ commutative diagram, both <label text=""> and <label options=""> need to be enclosed in curly braces if they contain commas.</label></label></li>
  <li>Specify the position of a label along the arrow path. The numeric values below are distance percentage on the path.
    <ul>
      <li>at start: pos=0</li>
      <li>very near start: pos=0.125</li>
      <li>near start: pos=0.25</li>
      <li>midway: pos=0.5</li>
      <li>near end: pos=0.75</li>
      <li>very near end: pos=0.875</li>
      <li>at end: pos=1</li>
    </ul>
  </li>
  <li>There should be no empty lines between different matrix entries in the diagram.</li>
  <li>Determine the correct direction of arrows and their tail directions (if any, such as the harpoon) by rotating the graph so that the starting node is placed on the left and the target node is on the right.</li>
  <li>By default, a label is placed on the left side of the arrow to which it is attached (relative to the arrow’s direction). Inner sep controls the distance between the label and the arrow.</li>
  <li>Label’s position with respect to the arrow: above, below, left, right, swap.</li>
  <li>
    <p>Source code block for writing tikz commutative diagrams in Emacs Org mode:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#+header: :headers '("\\usepackage{tikz}" "\\usepackage{tikz-cd}")
#+header: :imagemagick yes :iminoptions -density 500 :imoutoptions -trim
#+begin_src latex :exports results :eval never-export :results file raw :file figure-dir/filename.png
\begin{tikzcd}
  % ......
\end{tikzcd}
#+end_src
    
#+ATTR_ORG: :width 1000 :align center
#+ATTR_LATEX: :width 0.5\textwidth
#+RESULTS:
[[file:figure-dir/filename.png]]
</code></pre></div>    </div>

    <p>If Imagemagick is not specified, the driver for generating PNG images is <code class="language-plaintext highlighter-rouge">dvipng</code>. According to the tikzcd manual,</p>

    <blockquote>
      <p>dvi viewers will not display diagrams correctly. It is necessary to convert the dvi file to pdf or ps format—or, even better, use a tool that generates pdf files directly, such as pdflatex.</p>
    </blockquote>

    <p>Therefore, we need to use Imagemagick, which will generate PNG images from PDF files. In the header arguments for Imagemagick, <code class="language-plaintext highlighter-rouge">:iminoptions</code> specifies the parameters for the input file of Imagemagick, while <code class="language-plaintext highlighter-rouge">:imoutoptions</code> specifies the parameters for the output file. <code class="language-plaintext highlighter-rouge">-trim</code> must be used in <code class="language-plaintext highlighter-rouge">:imoutoptions</code> to crop the image of a4 paper size.</p>

    <p>The option <code class="language-plaintext highlighter-rouge">:eval never-export</code> is used to disable source code evaluation during each export, which can accelerate the export. Meanwhile, the option <code class="language-plaintext highlighter-rouge">:exports results</code> is still effective, which tell Org to export the results only, without the source code.</p>
  </li>
</ul>


  </div><a class="u-url" href="/computer/2025/11/20/tips-for-making-tikz-commutative-diagrams.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">止于至善</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Jihuan Tian</li><li><a class="u-email" href="mailto:jihuan_tian@hotmail.com">jihuan_tian@hotmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="/feed.xml"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#rss"></use></svg> <span>RSS</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>As regards numerical analysis, mathematical electromagnetism, Linux techniques and personal thoughts.</p>
      </div>
      <div class="footer-col">
        <p>The articles are under a <a href='http://creativecommons.org/licenses/by-nc-sa/4.0/'>Creative Commons Attribution License</a>. Copyright &copy; 2025 <a href="mailto:jihuan_tian@hotmail.com">Jihuan Tian</a>.</p>
      </div>
    </div>
  </div>

</footer>
</body>

</html>
